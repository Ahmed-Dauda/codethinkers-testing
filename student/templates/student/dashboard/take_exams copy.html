<div style="max-width: 700px; margin: auto; padding: 10px;">
    {% for category in categories %}
        <div class="category-block" style="border: 1px solid #ccc; border-radius: 8px; margin-bottom: 10px;">
            
            <!-- Category Header -->
            <div class="category-header" style="background: #f7f7f7; padding: 15px; font-weight: bold; cursor: pointer; display: flex; justify-content: space-between; align-items: center;">
                <span>{{ category.name }}</span>
                <span class="toggle-indicator" style="font-size: 12px; color: #666;">
                    ▶ Click to view courses
                </span>
            </div>

            <!-- Courses under this category -->
            <div class="course-list" style="display: none; padding: 10px;">
                {% for item in category.category.all %}
                    <a href="{% url 'student:start-exam' item.id %}"
                       style="display: block; padding: 10px; margin-bottom: 8px; border: 1px solid #ddd; border-radius: 5px; text-decoration: none; color: #333;">
                        {{ item.course_name }}
                    </a>
                {% empty %}
                    <p style="font-size: 12px; color: #888;">No courses in this category yet.</p>
                {% endfor %}
            </div>
        </div>
    {% empty %}
        <p class="text-center">No categories available yet.</p>
    {% endfor %}
</div>
<script>
document.addEventListener("DOMContentLoaded", function () {
    document.querySelectorAll(".category-header").forEach(function (header) {
        header.addEventListener("click", function () {
            const courseList = this.nextElementSibling;
            const indicator = this.querySelector(".toggle-indicator");

            if (courseList.style.display === "none" || courseList.style.display === "") {
                courseList.style.display = "block";
                indicator.textContent = "▼ Hide courses";
            } else {
                courseList.style.display = "none";
                indicator.textContent = "▶ Click to view courses";
            }
        });
    });
});
</script>
