

{% extends 'sms/dashboard/base.html' %}

{% load hitcount_tags %}
{% block title %} My Profile {% endblock %}


{% block content %} 

 
<div class="portlet light bordered card-body">
  <div class="row list-separated profile-stat">
      
  <div class="col-md-4 col-sm-4 col-xs-6">
      {% for profile in user_profile %}
      {% if profile.pro_img %}
      <img src="{{ profile.pro_img.url}}" width="100px" height="100px"  class="rounded-circle" alt=""><hr>
      {% else %}
  <img src="/static/sms/images/newlogo3.jpg" width="100px" height="100px" class="rounded-circle" alt=""><hr>
      {% endif %}
      
      <div class="uppercase profile-stat-text">Names : {{ profile.first_name}} | {{ profile.last_name}}</div>
      <div class="uppercase profile-stat-title"> <p>Last Profile Update : {{ profile.updated|timesince }}</p></div>
      <div class="uppercase profile-stat-title"> <p>Sex : {{ profile.gender}}</p></div>
      <div class="uppercase profile-stat-title"> <p>username : {{ profile.username}}</p></div>
      
      
     
  </div>
  
  <div class="col-md-4 col-sm-4 col-xs-6">
      <div class="uppercase profile-stat-title"><p>Email : {{ profile.user}}</p></div>
      <div class="uppercase profile-stat-text">  <p>Country : {{ profile.countries}}</p></div>
     
    
  </div>
  
  <div class="col-md-4 col-sm-4 col-xs-6">
      <div class="uppercase profile-stat-title"><p>Date Created :{{ profile.created }} | {{ profile.created|timesince }}</p></div>
      <div class=""><p>BIOGRAPHY : {{ profile.bio }}</p></div><hr style="color: rgb(16, 2, 37);">
  </div>
  
  <div class="col-md-4 col-sm-4 col-xs-6"><hr>
    <div class="uppercase profile-stat-text"> <a href="{% url 'sms:feedbackformview' %}">Feedback Form</a> </div>
  </div> 
  
  <div class="col-md-4 col-sm-4 col-xs-6">
      <div class="uppercase profile-stat-title"> <p>Last Profile Update : {{ profile.updated|timesince }}</p></div>
      <div class="uppercase profile-stat-title"> <p>Sex : {{ profile.gender}}</p></div>
      <div class="uppercase profile-stat-text"> <a href="{{ profile.get_absolute_url }}"> Edit Profile</a></div>
  </div>
 
  {% endfor %}

  <hr>
<!-- Assuming your template is myprofile.html -->



<!-- Assuming your template is myprofile.html -->

<!-- Assuming your template is myprofile.html -->

<!-- Assuming your template is myprofile.html -->

<!-- Add these fields to your form -->
<!-- <form method="post" action="{% url 'student:referrer_mentor_detail' pk=referrer_mentor.pk %}">
  {% csrf_token %}
  {{ form.as_p }}
  <button type="submit">Update Account</button>
</form> -->


{% if referrer_mentor %}
  <!-- Referrer Information -->
  <a href="{% url 'student:referrer_mentor_detail' pk=referrer_mentor.pk %}" target="_blank" rel="noopener noreferrer">Update Account <Details></Details></a>

  <h2 style="color: red;">Referrer Information</h2>
  <table border="1">
    <tr>
      <th>Referral Code</th>
      <th>Referred Students Count</th>
      <th>F Code Count</th>
      <th>Total Amount (#)</th>
      
      <th>Account Name</th>
      <th>Account Number</th>
      <th>Bank</th>
      <th>Pnone Number</th>
    </tr>
    <tr>
      <td>{{ referrer_mentor.referrer_code }}</td>
      <td>{{ referrer_mentor.f_code_count  }}</td>
      <td>{{ referrer_mentor.f_code_count }}</td>
      <td>{{ total_amount }}</td>
      
      <td>{{ account_name }}</td>
      <td>{{ account_number }}</td>
      <td>{{ bank }}</td>
      <td>{{ phone_no }}</td>
    </tr>
  </table>

  <br>
  <!-- Referred Students -->
  <h2>Referred Students</h2>
  <ul>
    {% for student in referrer_mentor.referred_students.all %}
      <li>{{ student.username }}</li>
    {% endfor %}
  </ul>

  <!-- Payments and Courses -->
  <h2>Payments and Courses</h2>
  <table border="1">
    <tr>
      <th>Names</th>
      <th>Amount (#)</th>
      <th>Courses</th>
      <th>Date of Payment</th>
    </tr>
    {% for payment in referrer_mentor.related_payments %}
      <tr>
        <td>{{ payment.first_name }} {{ payment.last_name }}</td>
        <td>{{ payment.amount }}</td>
        <td>{{ payment.courses.all|join:", " }}</td>
        <td>{{ payment.date_created }}</td>
      </tr>
    {% endfor %}
  </table>

{% else %}
  <p>You are not a referrer. If you have a referrer, they can provide you with a referral code.</p>
{% endif %}


<!-- {% if referrer_mentor %}
  <h2 style="color: red;">Referrer Information</h2>
  <table border="1">
    <tr>
      <th>Referral Code</th>
      <th>Referred Students Count</th>
      <th>F Code Count</th>
      <th>Total Amount </th>
    </tr>
    <tr>
      <td>{{ referrer_code }}</td>
      <td>{{ f_code_count }}</td>
      <td>{{ f_code_count }}</td>
      <td>#{{ total_amount }}</td>
    </tr>
  </table>
{% else %}
  <p>You are not a referrer. If you have a referrer, they can provide you with a referral code.</p>
{% endif %} -->

<!-- Include other parts of your profile template as needed -->

  <hr>
  </div>
  </div>
  <br><br><br>
<table class="table table-resposive">
  <thead style="background-color: black; color:white">
    <tr>
      <th scope="col">Id</th>
      <th scope="col">Title</th>
      <th scope="col">Course</th>
      <th scope="col">Pass Mark</th>
    </tr>
  </thead>
  <tbody>
    {% for course in courses %}
    {% if course  and course.pass_mark >= course.constant %}
    <tr>
      <th scope="row">{{course.id}}</th>
      <td>Check Course Progress</td>
      <td><a href="{% url 'sms:certificates' course.id %}">{{course.course_name}} </a></td>
      <td>{{course.constant}}</td>
    </tr>
    {% endif  %}
    {% endfor %}
  </tbody>
</table>

{% endblock %} 

