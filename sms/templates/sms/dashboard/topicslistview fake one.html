
{% extends 'sms/dashboard/base.html' %}

{% load hitcount_tags %}
{% load cloudinary %}
{% load embed_video_tags %}

{% block title %} beginners List {% endblock %}


{% block content %}

<style>
    .courses{
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  text-align: center;
}
.courses>*{
flex: 1 1 auto;
margin: 5px;
border: 1px dotted rgb(16, 2, 37);;
}
#more {display: none;}
.prog{
  text-align: center;
}

.videoWrapper {
  position: relative;
  padding-bottom: 56.25%; /* 16:9 */
  height: 0;
}
.videoWrapper iframe {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 80%;
}
.exam-cert{
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
}
.exam-cert>*{
flex: 1 1 auto;
 margin: 2px;
}

.img-box{
  width: 100%;
  height: auto;
  border: 4px solid #333;
}
.img-box img{
  display: block;
}
</style>


<h1 class="text-center">{{c}} Modules <br>
  {{ hitcount.total_hits }}  <i class="fas fa-eye"></i></h1>
<hr>
<div class="prog ">

<label for="file"><button class="text-white btn btn-primary" >{{ topics.number }} / {{c}}</button></label><br>
<p>Overall Process </p>
<progress style="width: 100%;" value="{{ topics.number }}" max="{{c}}">70 %</progress>
{% if topics.number == c %}
<h4 style="color: green;text-align:center">Congratulations! You have completed this course</h4>
{% endif %}
</div>

<div  class="">
  <div class="">

    {% for topic in topics %}
    <h3>{{topic.title|safe}}</h3><hr>

  <div class="text-white">{% get_hit_count for topic %} <i class="fas fa-eye"></i></div>

<!-- pagination codes star -->
	
{% if topics.has_other_pages %}
<div class="" id = ''>
<nav class="d-flex" aria-label="Page navigation example">

  <ul class="pagination  pagination-sm flex-wrap justify-content-center">
    {% if topics.has_previous %}
      <li class=" page-item"><a  class="continue page-link badge text-white bg-primary rounded-pill" href="?page={{ topics.previous_page_number }}">previous &laquo;</a></li>
    {% else %}
      <li class="page-item disabled"><span>&laquo;</span></li>
    {% endif %}
    
    
    {% if topics.has_next %}
      <li class="page-item"><a class="page-link badge text-white bg-primary rounded-pill" href="?page={{ topics.next_page_number }}"> next &raquo;</a></li>
    {% else %}
      <li class="page-item disabled"><span>last &raquo; </span></li>
    {% endif %}
  </ul>
</nav>
</div> 
{% endif %}
<!-- end of pagination -->


  <div>created: {{topic.created|date}} | {{topic.created|timesince}} | last updated: {{topic.updated}} </div><br>
  <p>Module: {{ topics.number }}</p><hr>
  
  {% if topic.img_topic %}
  <img  class="img-box" src="{{topic.img_topic.url}}"  alt="topics image">
  {% endif %}
  

  {% if topic.objectives %}
  <div data-label="my-label-button" class="line-numbers copy-to-clipboard-button body-text text-left" >{{topic.objectives|safe|linebreaksbr}}</div><hr>
  {% endif %}
  <button class="btn btn-primary" onclick="myFunction()">Start Learning</button>
  <div style="display: none;" id="myDIV">
    <br>


    {% if topic.video %}
    <div class="videoWrapper ratio ratio-16x9">
      <iframe src="{{ topic.video|safe }}?rel=0"  frameborder="0"></iframe>
    </div>
  {% endif %}
  
  ggggg 
  <iframe
        width="640" height="360"
        src="https://www.youtube.com/embed/u7pCgFHszI4"
        frameborder="0"
    ></iframe>

  ffffff

  {% if topic.desc %}
  <div><p data-label="my-label-button" class="line-numbers copy-to-clipboard-button" style="font-size: 20px;">{{topic.desc|safe}}</p></div><br><hr>
  {% else %}
  <div><p data-label="my-label-button" class="line-numbers copy-to-clipboard-button" style="font-size: 20px;">{{topic.coursedesc|safe}}</p></div><br><hr>
  {% endif %}<br>
  
  {% if topic.student_activity %}
  <div data-label="my-label-button" class="line-numbers copy-to-clipboard-button text-left" >{{topic.student_activity|safe}}</div><br><hr>
  {% endif %}
  
  {% if topic.evaluation %}
  <div data-label="my-label-button" class="line-numbers copy-to-clipboard-button body-text text-left">{{topic.evaluation|safe}}</div><br><hr>
  {% endif %}

{% for topic in topics %}
  <a href="#" class="topic-link" data-pk="{{ topic.pk }}">{{ topic.name }}</a>
{% endfor %}

<!-- pagination codes star -->
	
{% if topics.has_other_pages %}
<div class="" id = ''>
<nav class="d-flex" aria-label="Page navigation example">

  <ul class="pagination  pagination-sm flex-wrap justify-content-center">
    {% if topics.has_previous %}
      <li class=" page-item"><a  class="continue page-link text-white badge bg-primary rounded-pill" href="?page={{ topics.previous_page_number }}">previous &laquo;</a></li>
    {% else %}
      <li class="page-item disabled"><span>&laquo;</span></li>
    {% endif %}
    {% for i in topics.paginator.page_range %}
      {% if topics.number == i %}
        <li class="page-item active" aria-current="page"><span><a class="page-link" href="">Module {{ i }}</a></span></li>
      {% else %}
        <li class="page-item"><a class="continue page-link" href="?page={{ i }}">{{ i }}</a></li>
      {% endif %}
    {% endfor %}

    {% if topics.has_next %}
      <li class="page-item"><a class="page-link text-white badge bg-primary rounded-pill" href="?page={{ topics.next_page_number }}"> next &raquo;</a></li>
    {% else %}
      <li class="page-item disabled"><span>last &raquo; </span></li>
    {% endif %}
  </ul>
</nav>

</div> 
{% endif %}

<!-- end -->

<hr>
  <p>Join Community: {{topic.topics_url|urlizetrunc:15}}</p><br>

    <div style="text-align: center;" class="">

  {% if topics.number == c %}
  <h4 style="color: green;text-align:center">Congratulations! You have completed this course</h4>
  <!-- <h3>After completion of the Topics, take Exam</h3> -->
<br><hr>
  <div class = "exam-cert" >
    <h3 class="card text-center text-danger"><a href="{% url 'student:take-exam' %}">Take Exam</a></h3>
    <!-- <h3 class="card text-center text-danger"><a href="{% url 'student:view_result' %}">View Certificate (s)</a></h3> -->
  </div>
  
   {% endif %}
</div>

<hr>
  {% empty %}
  <h1 class="card text-center text-danger">No Courses Available Yet. CHECK LATER</h1>
  {% endfor %}
 

</div>
</div>
</div>
<!-- iframe videos -->

<script>
"use strict";
if (document.readyState !== 'loading') init();
else document.addEventListener('DOMContentLoaded', init);

function init() {
    if (window.runOnce) return;

    if (typeof YT === 'undefined') {
        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
    }

    var iframes = [];
    
    for (var iframe of document.querySelectorAll("iframe[src]")) {
        var src = iframe.getAttribute("src");
        if (src.includes("youtube.com/embed/")) {
            if(!src.includes("enablejsapi=1"))
                if(src.includes("?"))
                    iframe.setAttribute("src", src + "&enablejsapi=1");
                else
                    iframe.setAttribute("src", src + "?enablejsapi=1");

            iframes.push(iframe);
        }
    }

    var overlayStyles = {
        display: "none",
        content:"",
        position: "absolute",
        left: 0,
        right: 0,
        cursor: "pointer",
        backgroundColor: "black",
        backgroundRepeat: "no-repeat",
        backgroundPosition: "center",
    };

    window.onYouTubeIframeAPIReady = function() {
        iframes.forEach(function(iframe) {
            var overlay = document.createElement('div');
            for (var style in overlayStyles) {
                overlay.style[style] = overlayStyles[style];
            }
            
            var wrapper = document.createElement('div');
            wrapper.style.display = "inline-block";
            wrapper.style.position = "relative";

            iframe.parentNode.insertBefore(wrapper, iframe);
            
            wrapper.appendChild(overlay);
            wrapper.appendChild(iframe);
            
            var onPlayerStateChange = function(event) {
                if (event.data == YT.PlayerState.ENDED) {
                    overlay.style.backgroundImage = "url(data:image/svg+xml;utf8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiB2aWV3Qm94PSIwIDAgNTEwIDUxMCI+PHBhdGggZD0iTTI1NSAxMDJWMEwxMjcuNSAxMjcuNSAyNTUgMjU1VjE1M2M4NC4xNSAwIDE1MyA2OC44NSAxNTMgMTUzcy02OC44NSAxNTMtMTUzIDE1My0xNTMtNjguODUtMTUzLTE1M0g1MWMwIDExMi4yIDkxLjggMjA0IDIwNCAyMDRzMjA0LTkxLjggMjA0LTIwNC05MS44LTIwNC0yMDQtMjA0eiIgZmlsbD0iI0ZGRiIvPjwvc3ZnPg==)";
                    overlay.style.backgroundSize = "64px 64px";
                    overlay.style.top = 0;
                    overlay.style.bottom = 0;
                    overlay.style.display = "inline-block";
                } else if (event.data == YT.PlayerState.PAUSED) {
                    overlay.style.backgroundImage = "url(data:image/svg+xml;utf8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEiIHdpZHRoPSIxNzA2LjY2NyIgaGVpZ2h0PSIxNzA2LjY2NyIgdmlld0JveD0iMCAwIDEyODAgMTI4MCI+PHBhdGggZD0iTTE1Ny42MzUgMi45ODRMMTI2MC45NzkgNjQwIDE1Ny42MzUgMTI3Ny4wMTZ6IiBmaWxsPSIjZmZmIi8+PC9zdmc+)";
                    overlay.style.backgroundSize = "40px 40px";
                    overlay.style.top = "40px";
                    overlay.style.bottom = "50px";
                    overlay.style.display = "inline-block";
                } else if (event.data == YT.PlayerState.PLAYING) {
                    overlay.style.display = "none";
                }
            };
            
            var player  = new YT.Player(iframe, {
                    events: {
                        'onStateChange': onPlayerStateChange
                    }
                });
        
            wrapper.addEventListener("click", function() {
                var playerState = player.getPlayerState();
                if (playerState == YT.PlayerState.ENDED) {
                    player.seekTo(0);
                } else if (playerState == YT.PlayerState.PAUSED) {
                    player.playVideo();
                }
            });
        });
    };
    window.runOnce = true;
}

</script>

<script>
  function myFunction() {
    var x = document.getElementById("myDIV");
      x.style.display = "block";
  }
</script>




{% endblock %}

